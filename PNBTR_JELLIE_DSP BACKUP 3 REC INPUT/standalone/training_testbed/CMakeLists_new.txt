cmake_minimum_required(VERSION 3.20)

project(training_testbed)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# Native Core Audio + Cocoa GUI implementation
add_executable(training_testbed
    main.cpp
    training_testbed.cpp
    core_audio_gui.mm
)

target_include_directories(training_testbed PRIVATE 
    ${CMAKE_CURRENT_SOURCE_DIR}
    ${PROJECT_SOURCE_DIR}/core
)

target_link_libraries(training_testbed
    pnbtr_jellie_core
)

if(APPLE)
    target_link_libraries(training_testbed
        "-framework CoreAudio"
        "-framework AudioUnit"
        "-framework AudioToolbox"
        "-framework Cocoa"
        "-framework Foundation"
    )
    
    # Enable Objective-C++ for GUI components
    set_source_files_properties(core_audio_gui.mm PROPERTIES COMPILE_FLAGS "-x objective-c++")
endif()
